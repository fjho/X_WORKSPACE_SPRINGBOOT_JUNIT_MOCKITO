# Datasource H2 In-Memory
#Fuerza a que Spring cree la BD con el nombre que le hemos dado en la url
spring.test.database.replace=none
spring.datasource.url=jdbc:h2:mem:testBd;DB_CLOSE_DELAY=-1
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update

# Retrasa la ejecución de data.sql hasta que Hibernate haya creado las tablas.
# Evita errores de inserción por tablas inexistentes.
# Es especialmente útil cuando no usas schema.sql y dependes de las entidades JPA para crear el esquema.
spring.jpa.defer-datasource-initialization=true
# Fuerza el archivo con los SQL (insert) necesarios para hacer las pruebas
# No dejar el nombre como data.sql pq crea conflicto con el que hay en el directorio src/main/java/resources
# Y se ejecutan los insert de los dos ficheros en la BD de pruebas
spring.sql.init.data-locations=classpath:data-test.sql